<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³Ù„Ù… Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„ â¤ï¸</title>
    <style>
        :root { --gold: #f1c40f; --dark-bg: #0d0d0d; --card-bg: rgba(255, 255, 255, 0.08); }
        body { background-color: var(--dark-bg); font-family: 'Segoe UI', sans-serif; color: white; margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 500px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .full-card { grid-column: span 2; }
        .card { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 15px; cursor: pointer; transition: 0.3s; text-align: center; }
        .card:hover { border-color: var(--gold); background: rgba(241,196,15,0.05); }
        .card i { font-size: 2rem; display: block; margin-bottom: 8px; }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--dark-bg); z-index: 2000; padding: 15px; overflow-y: auto; box-sizing: border-box; }
        .quran-img { width: 100%; max-width: 450px; border-radius: 10px; border: 2px solid var(--gold); }
        .btn-close { background: #e74c3c; color: white; border: none; padding: 12px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; margin-bottom: 20px; }
        .nav-btn { background: var(--gold); color: black; border: none; padding: 10px; border-radius: 5px; font-weight: bold; width: 45%; cursor: pointer; }
        .prayer-card { background: rgba(241, 196, 15, 0.1); border: 1px solid var(--gold); padding: 12px; border-radius: 10px; margin: 8px 0; display: flex; justify-content: space-between; }
        .dua-box { background: #1a1a1a; padding: 15px; border-radius: 12px; margin-bottom: 10px; border-right: 4px solid var(--gold); text-align: right; line-height: 1.6; }
    </style>
</head>
<body>

    <h2 style="color: var(--gold); margin-bottom: 20px;">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø³Ù„Ù… Ø§Ù„Ø´Ø§Ù…Ù„ ğŸ‡©ğŸ‡¿</h2>

    <div class="container">
        <div class="card full-card" onclick="openKhatma()"><i>ğŸ“–</i><h3>Ø§Ù„Ù…ØµØ­Ù ÙˆØ§Ù„Ø®ØªÙ…Ø©</h3><p id="status">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: 1</p></div>
        
        <div class="card" onclick="openPrayers()"><i>ğŸ•Œ</i><h3>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h3><p>ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</p></div>
        
        <div class="card" onclick="openQibla()"><i>ğŸ“</i><h3>Ø§Ù„Ù‚Ø¨Ù„Ø©</h3><p>Ø¨ÙˆØµÙ„Ø© Ø§Ù„ÙƒØ¹Ø¨Ø©</p></div>

        <div class="card" onclick="openDhikrMenu()"><i>â˜€ï¸</i><h3>Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3><p>Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡</p></div>

        <div class="card" onclick="openDuas()"><i>ğŸ¤²</i><h3>Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</h3><p>Ø£Ø¯Ø¹ÙŠØ© Ù†Ø¨ÙˆÙŠØ©</p></div>
    </div>

    <div id="overlay">
        <button class="btn-close" onclick="closeOverlay()">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© âœ–</button>
        <div id="content-area"></div>
    </div>

    <audio id="adhanAudio" src="https://www.islamcan.com/adhan/makkah.mp3"></audio>

    <script>
        let lastPage = localStorage.getItem('quranPage') || 1;
        document.getElementById('status').innerText = `Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${lastPage}`;

        // 1. ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„Ø®ØªÙ…Ø© ÙˆØ§Ù„ØªÙØ³ÙŠØ±
        function openKhatma() { showPage(lastPage); }
        function showPage(num) {
            if(num < 1 || num > 604) return;
            lastPage = num; localStorage.setItem('quranPage', num);
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('content-area').innerHTML = `
                <h3 style="color:var(--gold)">Ø§Ù„ØµÙØ­Ø© ${num}</h3>
                <img src="https://www.searchtruth.com/quran/images2/page${num}.png" class="quran-img">
                <button onclick="getTafsir(${num})" style="background:none; color:var(--gold); border:1px solid var(--gold); padding:8px; width:100%; border-radius:5px; margin:10px 0;">ğŸ“– Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ±</button>
                <div id="tafsirArea"></div>
                <div style="display:flex; justify-content:space-between;"><button class="nav-btn" onclick="showPage(${parseInt(num)+1})">Ø§Ù„ØªØ§Ù„ÙŠ</button><button class="nav-btn" onclick="showPage(${parseInt(num)-1})">Ø§Ù„Ø³Ø§Ø¨Ù‚</button></div>`;
        }
        async function getTafsir(page) {
            const area = document.getElementById('tafsirArea'); area.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
            const res = await fetch(`https://api.alquran.cloud/v1/page/${page}/ar.jalalayn`);
            const data = await res.json();
            area.innerHTML = data.data.ayahs.map(a => `<div class="dua-box"><strong>Ø¢ÙŠØ© ${a.numberInSurah}:</strong><br>${a.text}</div>`).join('');
        }

        // 2. Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© (Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±)
        async function openPrayers() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('content-area').innerHTML = `
                <h3 style="color:var(--gold)">Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</h3>
                <select id="city" onchange="loadTimes(this.value)" style="width:100%; padding:10px; border-radius:8px; background:#222; color:white; border:1px solid var(--gold);">
                    <option value="Alger">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø§Ù„Ø¹Ø§ØµÙ…Ø©</option><option value="Oran">ÙˆÙ‡Ø±Ø§Ù†</option><option value="Constantine">Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©</option><option value="El Oued">Ø§Ù„ÙˆØ§Ø¯ÙŠ</option>
                </select><div id="pTimes"></div><button onclick="enableAdhan()" style="margin-top:10px; background:var(--gold); width:100%; padding:10px; border:none; border-radius:8px; font-weight:bold;">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ø°Ø§Ù† ğŸ””</button>`;
            loadTimes("Alger");
        }
        async function loadTimes(city) {
            const res = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${city}&country=Algeria&method=3`);
            const data = await res.json(); const t = data.data.timings;
            document.getElementById('pTimes').innerHTML = `
                <div class="prayer-card"><span>Ø§Ù„ÙØ¬Ø±</span><span>${t.Fajr}</span></div><div class="prayer-card"><span>Ø§Ù„Ø¸Ù‡Ø±</span><span>${t.Dhuhr}</span></div>
                <div class="prayer-card"><span>Ø§Ù„Ø¹ØµØ±</span><span>${t.Asr}</span></div><div class="prayer-card"><span>Ø§Ù„Ù…ØºØ±Ø¨</span><span>${t.Maghrib}</span></div>
                <div class="prayer-card"><span>Ø§Ù„Ø¹Ø´Ø§Ø¡</span><span>${t.Isha}</span></div>`;
        }
        function enableAdhan() { document.getElementById('adhanAudio').play().then(() => { document.getElementById('adhanAudio').pause(); alert("ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„!"); }); }

        // 3. Ø§Ù„Ø£Ø°ÙƒØ§Ø± (Ø¨Ø§Ù„ØµÙˆØ± Ø§Ù„ØªÙŠ Ø£Ø±Ø³Ù„ØªÙ‡Ø§)
        function openDhikrMenu() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('content-area').innerHTML = `
                <div class="card" onclick="showImg('https://i.ibb.co/Vp6zK0S/1000032449.jpg')">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</div>
                <div class="card" onclick="showImg('https://i.ibb.co/L9YmN4V/1000032450.jpg')" style="margin-top:10px">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</div>
                <div class="card" onclick="showImg('https://i.ibb.co/Rh0Xn7z/1000032448.jpg')" style="margin-top:10px">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…</div>`;
        }
        function showImg(url) { document.getElementById('content-area').innerHTML = `<img src="${url}" class="quran-img">`; }

        // 4. Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©
        function openDuas() {
            const duas = [
                "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø¹Ù„Ù…Ø§Ù‹ Ù†Ø§ÙØ¹Ø§Ù‹ØŒ ÙˆØ±Ø²Ù‚Ø§Ù‹ Ø·ÙŠØ¨Ø§Ù‹ØŒ ÙˆØ¹Ù…Ù„Ø§Ù‹ Ù…ØªÙ‚Ø¨Ù„Ø§Ù‹",
                "Ø±Ø¨Ù†Ø§ Ø¢ØªÙ†Ø§ ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ Ø­Ø³Ù†Ø© ÙˆÙÙŠ Ø§Ù„Ø¢Ø®Ø±Ø© Ø­Ø³Ù†Ø© ÙˆÙ‚Ù†Ø§ Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±",
                "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ùƒ Ø¹ÙÙˆ ÙƒØ±ÙŠÙ… ØªØ­Ø¨ Ø§Ù„Ø¹ÙÙˆ ÙØ§Ø¹ÙÙ Ø¹Ù†ÙŠ"
            ];
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('content-area').innerHTML = `<h3 style="color:var(--gold)">Ø£Ø¯Ø¹ÙŠØ© Ù…Ø£Ø«ÙˆØ±Ø©</h3>` + duas.map(d => `<div class="dua-box">${d}</div>`).join('');
        }

        // 5. Ø§Ù„Ù‚Ø¨Ù„Ø©
        function openQibla() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('content-area').innerHTML = `<h3>Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ù‚Ø¨Ù„Ø©</h3><div style="width:150px; height:150px; border:4px solid var(--gold); border-radius:50%; margin:auto; position:relative;"><div id="arrow" style="width:4px; height:60px; background:red; position:absolute; left:73px; top:15px; transform-origin:bottom center;"></div></div><p>ØªØ£ÙƒØ¯ Ù…Ù† ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ GPS</p>`;
        }

        function closeOverlay() { document.getElementById('overlay').style.display = 'none'; document.getElementById('status').innerText = `Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${lastPage}`; }
    </script>
</body>
</html>
